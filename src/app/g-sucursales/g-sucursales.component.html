<div class="container-fluid">

  <div class="jumbotron">
    <h1 class="display-4">Gestión de Sucursales</h1>
    <p class="lead">El sistema debe permitir ingresar, modificar y eliminar sucursales, las cuales almacenaran un
      nombre, dirección, teléfono, administrador.</p>
    <hr class="my-4">
    <button aria-controls="collapseForm" aria-expanded="false" class="btn btn-outline-success btn-lg"
            data-target="#collapseForm" data-toggle="collapse" role="button" type="button">AGREGAR
    </button>
  </div>

  <div class="collapse" id="collapseForm">
    <form #userForm="ngForm"
          (ngSubmit)="onSubmit(sucursalModel.nombreSucursal,sucursalModel.direccionSucursal, sucursalModel.telefonoSucursal,sucursalModel.administradorSucursal)"
          *ngIf="!submitted" novalidate>

      <div class="row">
        <div class="col-lg-6 form-group">
          <label>Nombre</label>
          <input #name="ngModel" [(ngModel)]="sucursalModel.nombreSucursal"
                 [class.is-invalid]="name.invalid && name.touched"
                 class="form-control" name="name" required type="text">
          <small [class.d-none]="name.valid || name.untouched" class="text-danger">Nombre es necesario</small>
        </div>

        <div class="col-lg-6 form-group">
          <label>Dirección</label>
          <input #direc="ngModel" [(ngModel)]="sucursalModel.direccionSucursal"
                 [class.is-invalid]="direc.invalid && direc.touched" class="form-control" name="direccion"
                 required type="text">
          <small [class.d-none]="direc.valid || direc.untouched" class="text-danger">Dirección requerida</small>
        </div>
      </div>

      <div class="row">
        <div class="col-lg-6 form-group">
          <label>Telefono</label>
          <input #telefono="ngModel" [(ngModel)]="sucursalModel.telefonoSucursal"
                 [class.is-invalid]="telefono.invalid && telefono.touched"
                 class="form-control" name="telefono" required type="number">
          <small [class.d-none]="telefono.valid || telefono.untouched" class="text-danger">Telefono es necesario</small>
        </div>

        <div class="col-lg-6 form-group">
          <label>Administrador</label>
          <input #admin="ngModel" [(ngModel)]="sucursalModel.administradorSucursal"
                 [class.is-invalid]="admin.invalid && admin.touched" class="form-control" name="direccion"
                 required type="text">
          <small [class.d-none]="admin.valid || admin.untouched" class="text-danger">Administrador requerido</small>
        </div>

      </div>

      <button [disabled]="userForm.form.invalid" class="btn btn-outline-primary " type="submit">Agregar
        Sucursal
      </button>

    </form>

  </div>

  <div class="card-body">
  <div class="table-editable" id="table">
    <table class="table table-bordered table-responsive-md table-striped text-center">
      <thead class="table-dark">
      <tr>
        <th class="text-center">Nombre</th>
        <th class="text-center">Dirección</th>
        <th class="text-center">Teléfono</th>
        <th class="text-center">Administrador</th>
        <th class="text-center">Eliminar</th>
        <th class="text-center">Actualizar</th>
      </tr>
      </thead>
      <tr *ngFor="let sucursal of sucursalList; let id = index">
        <td>
          <span >{{sucursal.nombreSucursal}}</span>
        </td>
        <td>
          <span (blur)="updateList(id, 'direccionSucursal', $event)" (keyup)="changeValue(id, 'direccionSucursal', $event)"
                contenteditable="true">{{sucursal.direccionSucursal}}</span>
        </td>
        <td>
          <span (blur)="updateList(id, 'telefonoSucursal', $event)" (keyup)="changeValue(id, 'telefonoSucursal', $event)"
                contenteditable="true">{{sucursal.telefonoSucursal}}</span>
        </td>
        <td>
          <span (blur)="updateList(id, 'administradorSucursal', $event)" (keyup)="changeValue(id, 'administradorSucursal', $event)"
                contenteditable="true">{{sucursal.administradorSucursal}}</span>
        </td>
        <td>
                  <span class="table-remove">
                    <button (click)="remove(id,sucursal.nombreSucursal)" class="my-0" color="danger" mdbBtn rounded="true" size="sm"
                            type="button">Eliminar</button>
                  </span>
        </td>
        <td>
          <span>
            <button
              (click)="update(sucursal.nombreSucursal,sucursal.direccionSucursal,sucursal.telefonoSucursal,sucursal.administradorSucursal)"
              class="my-0" color="danger" mdbBtn rounded="true" size="sm"
              type="button">Actualizar</button>
          </span>
        </td>
      </tr>
    </table>
  </div>
</div>

</div>

